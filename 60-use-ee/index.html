<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.69.0" />
    <meta name="description" content="An Ansible Automation Platform 2 learning experience">
<meta name="author" content="Götz, Christian">

    <link rel="icon" href="https://ansible-learnfest.github.io/images/favicon.png" type="image/png">

    <title>Use the EE in controller :: Ansible LearnFest</title>

    
    <link href="https://ansible-learnfest.github.io/css/nucleus.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/fontawesome-all.min.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/hybrid.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/featherlight.min.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/perfect-scrollbar.min.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/auto-complete.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/atom-one-dark-reasonable.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/theme.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/tabs.css?1674737333" rel="stylesheet">
    <link href="https://ansible-learnfest.github.io/css/hugo-theme.css?1674737333" rel="stylesheet">
    
    <link href="https://ansible-learnfest.github.io/css/theme-red.css?1674737333" rel="stylesheet">
    
    

    <script src="https://ansible-learnfest.github.io/js/jquery-3.3.1.min.js?1674737333"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/60-use-ee/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://ansible-learnfest.github.io/">
    <img src="https://ansible-learnfest.github.io/images/aap-learnfest-logo.png">
  </a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://ansible-learnfest.github.io/js/lunr.min.js?1674737333"></script>
<script type="text/javascript" src="https://ansible-learnfest.github.io/js/auto-complete.js?1674737333"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/ansible-learnfest.github.io\/";
    
</script>
<script type="text/javascript" src="https://ansible-learnfest.github.io/js/search.js?1674737333"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='https://ansible-learnfest.github.io/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-intro/" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/1-intro/">
          Introduction
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/10-prepare-environment/" title="Prepare Environment" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/10-prepare-environment/">
          Prepare Environment
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/20-vscode/" title="The VSCode extension" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/20-vscode/">
          The VSCode extension
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/30-use-pah/" title="Using Private Automation Hub" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/30-use-pah/">
          Using Private Automation Hub
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/50-build-ee/" title="Build an execution environment" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/50-build-ee/">
          Build an execution environment
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/55-transfer-ee/" title="Transfer Execution Environment" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/55-transfer-ee/">
          Transfer Execution Environment
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/60-use-ee/" title="Use the EE in controller" class="dd-item
        
        active
        
        ">
      <a href="https://ansible-learnfest.github.io/60-use-ee/">
          Use the EE in controller
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/archive/" title="Archive" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/">
          Archive
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/" title="Version 0.1" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/">
          Version 0.1
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/1-intro/" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/1-intro/">
          Introduction
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/2-getting-started/" title="Prepare Base Environment" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/2-getting-started/">
          Prepare Base Environment
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/" title="Track 1: AAP Administrator" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/">
          Track 1: AAP Administrator
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/1-automation-controller/" title="Install Automation Controller" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/1-automation-controller/">
          Install Automation Controller
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/2-config-controller/" title="Configure Automation Controller" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/2-config-controller/">
          Configure Automation Controller
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/3-install-pah/" title="Install Private Automation Hub" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/3-install-pah/">
          Install Private Automation Hub
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/4-use-pah/" title="Using Private Automation Hub" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/4-use-pah/">
          Using Private Automation Hub
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/5-automation-mesh/" title="Extend Automation Mesh" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/5-automation-mesh/">
          Extend Automation Mesh
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/6-aap2-fullstack/" title="AAP 2 Full Stack Installation" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/6-aap2-fullstack/">
          AAP 2 Full Stack Installation
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/3-track-1/7-bonus-using-catalog/" title="Bonus Track: Automation Catalog" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/3-track-1/7-bonus-using-catalog/">
          Bonus Track: Automation Catalog
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/4-track-2/" title="Track 2: Automation Content Developer" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/4-track-2/">
          Track 2: Automation Content Developer
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/4-track-2/1-vscode/" title="The VSCode extension" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/4-track-2/1-vscode/">
          The VSCode extension
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/4-track-2/2-build-ee/" title="Build an execution environment" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/4-track-2/2-build-ee/">
          Build an execution environment
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/4-track-2/3-transfer-ee/" title="Transfer Execution Environment" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/4-track-2/3-transfer-ee/">
          Transfer Execution Environment
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/archive/version-0.1/4-track-2/4-use-ee/" title="Using Private Automation Hub" class="dd-item
        
        
        
        ">
      <a href="https://ansible-learnfest.github.io/archive/version-0.1/4-track-2/4-use-ee/">
          Using Private Automation Hub
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/ansible-learnfest/ansible-learnfest-guide"><i class='fas fa-home'></i> Source Code</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='https://ansible-learnfest.github.io/'></a> > Use the EE in controller
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#use-the-ee-in-controller">Use the EE in controller</a>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#tasks">Tasks</a></li>
        <li><a href="#configure-ee-in-controller">Configure EE in Controller</a></li>
        <li><a href="#bring-it-all-together">Bring it all together</a></li>
        <li><a href="#challenge-tasks">Challenge tasks</a></li>
        <li><a href="#goal">Goal</a></li>
        <li><a href="#tips">Tips</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Use the EE in controller
            </h1>
          

        



	<h2 id="use-the-ee-in-controller">Use the EE in controller</h2>
<p>You have tested running a Playbook that depends on the Podman collection with <code>ansible-navigator</code> in your custom Execution Environment. Now it&rsquo;s time to use the custom EE with the Podman collection in Automation Controller.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>The custom EE was pushed and is published in PAH</li>
</ul>
<h3 id="tasks">Tasks</h3>
<ul>
<li>Check Automation Controller is configured to use EE&rsquo;s in PAH</li>
<li>Use the custom EE in Controller</li>
</ul>
<h3 id="configure-ee-in-controller">Configure EE in Controller</h3>
<ul>
<li>Check the <strong>Credential</strong> <code>Automation Hub Container Registry</code> points to PAH
<ul>
<li><strong>Name</strong>: Automation Hub Container Registry</li>
<li><strong>Organization</strong>: Default</li>
<li><strong>Credential Type</strong>: Container Registry</li>
<li><strong>Authentication URL</strong>:</li>
<li><strong>Username</strong>: admin</li>
<li><strong>Password</strong>: &lt;your secret password&gt;</li>
</ul>
</li>
</ul>

<div class="notices note" ><p>You can find the Authentication URL on your private automation hub by navigating to <strong>Execution Environments</strong>, select the EE you want to use and then in <strong>Details</strong>.</p>
</div>

<ul>
<li>Go to <code>Execution Environments</code> and add the new EE
<ul>
<li><strong>Name</strong>: ee-ansible-demo</li>
<li><strong>Image</strong>: &lt;PAH Hostname&gt;/&lt;image name&gt;:&lt;tag&gt;</li>
<li><strong>Pull</strong>: Always</li>
<li><strong>Registry Credential</strong>: Automation Hub Container Registry</li>
<li><strong>Organization</strong>: Default</li>
</ul>
</li>
</ul>

<div class="notices note" ><p>Get the image location from your PAH: In <strong>Execution Environments</strong> click the image.</p>
</div>

<h3 id="bring-it-all-together">Bring it all together</h3>
<p>This time we&rsquo;ll run the Playbook you used before, but in your custom EE! That means we shouldn&rsquo;t have to use a <code>requirements.yml</code> file to automatically load the needed collection because <code>containers.podman</code> is already included in the EE.</p>
<ul>
<li>Create a new <strong>Project</strong> using <code>https://github.com/ansible-learnfest/ee-flow.git</code> <strong>with the branch <code>wo-requirements</code></strong>. This branch contains no <code>requirement.yml</code> to automatically add the collection. If you want to double check, have a look a the Job output and you&rsquo;ll notice that no collection was installed during project sync.</li>
<li>Create a <strong>Job Template</strong> with the same settings as in the <code>Using Private Automation Hub</code> chapter, or just create a copy of it. We want to make one change in the copied job template:
<ul>
<li>Set the <strong>Execution Environment</strong> to <code>ee-ansible-demo</code> you just created in the previous section of this lab.</li>
</ul>
</li>
<li>Edit your  <strong>Workshop Inventory</strong>: add <code>node3.&lt;LABID&gt;.internal</code> and disable <code>node1.&lt;LABID&gt;.internal</code>.</li>
<li>Run the Job Template and check the outcome</li>
</ul>
<h3 id="challenge-tasks">Challenge tasks</h3>
<ul>
<li>Build another EE with different content, import it into Controller and use different job templates with different EE’s</li>
<li>Think about version pinning in the EE: what’s the best way to do it? How can you track versioning?</li>
<li>If you use GitLab or GitHub have a look at <a href="https://renovatebot.com">RenovateBot</a> which can help you to track dependencies. <a href="https://docs.renovatebot.com/">https://docs.renovatebot.com/</a></li>
</ul>
<h3 id="goal">Goal</h3>
<ul>
<li>Get familiar with using EE&rsquo;s in controller and different job templates</li>
</ul>
<h3 id="tips">Tips</h3>
<p>You can disable automation controller&rsquo;s feature to automatically download and install Ansible Collections by navigating to <strong>Settings</strong> -&gt; <strong>Job Settings</strong>. Here you can disable <code>Enable Collection(s) Download</code> and <code>Enable Role Download</code>. By doing so, you force the automation controller to only use collections which are already part of the execution environment. This can be useful to make sure the collection inside the EE is not overridden by a newer version provided by your private automation hub or Ansible Galaxy. This gives you more predictable and reproducible Ansible Playbook execution.</p>





<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://ansible-learnfest.github.io/55-transfer-ee/" title="Transfer Execution Environment"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://ansible-learnfest.github.io/archive/" title="Archive" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://ansible-learnfest.github.io/js/clipboard.min.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/perfect-scrollbar.min.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/perfect-scrollbar.jquery.min.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/jquery.sticky.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/featherlight.min.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/highlight.pack.js?1674737333"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://ansible-learnfest.github.io/js/modernizr.custom-3.6.0.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/learn.js?1674737333"></script>
    <script src="https://ansible-learnfest.github.io/js/hugo-learn.js?1674737333"></script>
    
        
            <script src="https://ansible-learnfest.github.io/mermaid/mermaid.js?1674737333"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
